{% extends "base.html" %}

{% block title %}{{ character.name }} - D&D Character{% endblock %}

{% block extra_css %}
<style>
    .character-header {
        display: flex;
        flex-wrap: wrap;
        gap: 2rem;
        margin-bottom: 2rem;
        align-items: flex-start;
    }
    
    .character-image {
        flex: 0 0 300px;
        max-width: 100%;
        border-radius: 8px;
        box-shadow: 0 2px 10px rgba(0,0,0,0.1);
    }
    
    .character-info {
        flex: 1;
        min-width: 300px;
    }
    
    .character-name {
        font-size: 2.5em;
        margin: 0 0 0.5em 0;
        color: #2c3e50;
        border-bottom: 2px solid #3498db;
        padding-bottom: 0.5em;
    }
    
    .character-meta {
        display: flex;
        flex-wrap: wrap;
        gap: 1.5rem;
        margin-bottom: 1.5rem;
    }
    
    .meta-group {
        margin-bottom: 1rem;
    }
    
    .meta-label {
        font-weight: bold;
        color: #7f8c8d;
        display: block;
        margin-bottom: 0.25rem;
    }
    
    .meta-value {
        font-size: 1.1em;
        color: #2c3e50;
    }
    
    .section {
        margin-bottom: 2rem;
        background: #fff;
        padding: 1.5rem;
        border-radius: 8px;
        box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    }
    
    .section-title {
        color: #2c3e50;
        margin-top: 0;
        padding-bottom: 0.5em;
        border-bottom: 1px solid #ecf0f1;
    }
    
    .character-actions {
        display: flex;
        gap: 1rem;
        margin: 2rem 0;
    }
    
    .btn {
        display: inline-block;
        padding: 0.6rem 1.2rem;
        border-radius: 4px;
        text-decoration: none;
        font-weight: bold;
        transition: all 0.2s;
    }
    
    .btn-edit {
        background: #3498db;
        color: white;
    }
    
    .btn-edit:hover {
        background: #2980b9;
    }
    
    .btn-delete {
        background: #e74c3c;
        color: white;
        border: none;
        cursor: pointer;
    }
    
    .btn-delete:hover {
        background: #c0392b;
    }
    
    @media (max-width: 768px) {
        .character-header {
            flex-direction: column;
        }
        
        .character-image {
            width: 100%;
            max-width: 100%;
        }
    }
</style>
{% endblock %}

{% block content %}
<main class="character-detail" role="main">
    <div class="container">
        <div class="character-actions">
            <a href="{{ url_for('edit_character', character_id=character.id) }}" class="btn btn-edit">Edit Character</a>
            <form action="{{ url_for('delete_character', character_id=character.id) }}" method="post" onsubmit="return confirm('Are you sure you want to delete this character? This cannot be undone.');">
                <button type="submit" class="btn btn-delete">Delete Character</button>
            </form>
        </div>
        
        <div class="character-header">
            <img src="{{ url_for('static', filename=character.image_path) }}" 
                 alt="{{ character.image_alt }}" 
                 class="character-image">
                 
            <div class="character-info">
                <h1 class="character-name">{{ character.name }}</h1>
                
                <div class="character-meta">
                    <div class="meta-group">
                        <span class="meta-label">Race</span>
                        <span class="meta-value">{{ character.race }}</span>
                    </div>
                    
                    <div class="meta-group">
                        <span class="meta-label">Class</span>
                        <span class="meta-value">{{ character.character_class }}</span>
                    </div>
                    
                    <div class="meta-group">
                        <span class="meta-label">Level</span>
                        <span class="meta-value">{{ character.level }}</span>
                    </div>
                    
                    <div class="meta-group">
                        <span class="meta-label">Alignment</span>
                        <span class="meta-value">{{ character.alignment }}</span>
                    </div>
                    
                    <div class="meta-group">
                        <span class="meta-label">Background</span>
                        <span class="meta-value">{{ character.background or 'N/A' }}</span>
                    </div>
                </div>
                
                <div class="section">
                    <h2 class="section-title">Description</h2>
                    <p>{{ character.short_description }}</p>
                </div>
            </div>
        </div>
        
        <div class="character-details">
            {% if character.backstory %}
            <div class="section">
                <h2 class="section-title">Backstory</h2>
                <p>{{ character.backstory|replace('\n', '<br>')|safe }}</p>
            </div>
            {% endif %}
            
            {% if character.personality %}
            <div class="section">
                <h2 class="section-title">Personality</h2>
                <p>{{ character.personality|replace('\n', '<br>')|safe }}</p>
            </div>
            {% endif %}
            
            {% if character.abilities_skills %}
            <div class="section">
                <h2 class="section-title">Abilities & Skills</h2>
                <p>{{ character.abilities_skills|replace('\n', '<br>')|safe }}</p>
            </div>
            {% endif %}
        </div>
    </div>
</main>
{% endblock %}
